# See https://gitlab.com/nvidia/container-images/cuda/-/blob/master/dist/11.8.0/ubuntu2204/runtime/cudnn8/Dockerfile
FROM nvidia/cuda:11.8.0-cudnn8-runtime-ubuntu22.04

# Disable NVIDIA repos to prevent accidental upgrades.
# RUN cd /etc/apt/sources.list.d && \
#    mv cuda.list cuda.list.disabled && \
#    mv nvidia-ml.list nvidia-ml.list.disabled

# See https://github.com/databricks/containers/blob/master/ubuntu/minimal/Dockerfile
RUN apt-get update \
  && apt-get -y upgrade \
  && apt-get install --yes \
    openjdk-8-jdk-headless \
    iproute2 \
    bash \
    sudo \
    coreutils \
    procps \
    wget \
  && /var/lib/dpkg/info/ca-certificates-java.postinst configure \
  && apt-get clean \
  && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
